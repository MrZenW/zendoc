<section>
	<title>
	fsck
	</title>
	<screen>
<![CDATA[
检查文件系统并尝试修复错误。 
]]>
	</screen>
	<section>
		<title>
		使用
		</title>
		<screen>
<![CDATA[
功能说明：检查文件系统并尝试修复错误。

语　　法：fsck [-aANPrRsTV][-t <文件系统类型>][文件系统...]

补充说明：当文件系统发生错误四化，可用fsck指令尝试加以修复。

参　　数：

-a 自动修复文件系统，不询问任何问题。

-A 依照/etc/fstab配置文件的内容，检查文件内所列的全部文件系统。

-N 不执行指令，仅列出实际执行会进行的动作。

-P 当搭配"-A"参数使用时，则会同时检查所有的文件系统。

-r 采用互动模式，在执行修复时询问问题，让用户得以确认并决定处理方式。

-R 当搭配"-A"参数使用时，则会略过/目录的文件系统不予检查。

-s 依序执行检查作业，而非同时执行。

-t<文件系统类型> 指定要检查的文件系统类型。

-T 执行fsck指令时，不显示标题信息。

-V 显示指令执行过程。

例子 :

检查 msdos 档案系统的 /dev/hda5 是否正常，如果有异常便自动修复 :

fsck -t msdos -a /dev/hda5


注意 :

此指令可与 /etc/fstab 相互参考操作来加以了解。

运行fsck命令后产生的文件有什么用？


当执行fsck命令时，fsck命令如果发现存在孤立的文件或目录，这些孤立的文件或目录对于系统管理员或用户来说，无法访问到它，因为它与它的上级目录失去了关联，如果用户允许fsck重新把它们找回来的话，fsck命令就会把这些孤立的文件或目录放在文件系统的/lost+found目录下，并用各自的i-node号来命名，以便用户查找自己需要的文件。Lost+found目录通过它的英文含义我们都可以知道，它是一个失物认领处。


因此当某个用户发现自己丢失了某个文件，可以在执行fsck之后到/lost+found目录下去查找，这时通过文件名已无法辨认出文件的作用，只能用 file之类的命令来确定文件的类型，如果是数据文件，可以用more或vi命令来查看，如果是二进制文件，可以用dbx命令来调试或者试着执行它(注意它可能是一个具有破坏性的程序)，知道文件或目录的作用之后，可以对其进行改名。


如果用户不允许fsck把这些孤立的文件或目录找回来，那么fsck命令就会破坏这些文件或目录，彻底丢失这些文件或目录，用户或系统管理员永远也无法找回它们。 
]]>
		</screen>
	</section>
	<section>
		<title>
		修复分区
		</title>
		<screen>
<![CDATA[
输入Root密码登录后采用：fsck -t ext3 -r /usr/local 修复

fsck的命令的几个使用方法

指令：fsck

使用权限 : 超级使用者

使用方式 : fsck [-sACVRP] [-t fstype] [–] [fsck-options] filesys […]

说明 ： 检查与修复 Linux 档案系统，可以同时检查一个或多个 Linux 档案系统

参数 ：

filesys ： device 名称(eg./dev/sda1)，mount 点 (eg. / 或 /usr)

-t : 给定档案系统的型式，若在 /etc/fstab 中已有定义或 kernel 本身已支援的则不需加上此参数

-s : 依序一个一个地执行 fsck 的指令来检查

-A : 对/etc/fstab 中所有列出来的 partition 做检查

-C : 显示完整的检查进度

-d : 打印 e2fsck 的 debug 结果

-p : 同时有 -A 条件时，同时有多个 fsck 的检查一起执行

-R : 同时有 -A 条件时，省略 / 不检查

-V : 详细显示模式

-a : 如果检查有错则自动修复

-r : 如果检查有错则由使用者回答是否修复

例子 :

检查 msdos 档案系统的 /dev/hda5 是否正常，如果有异常便自动修复 :fsck -t msdos -a /dev/hda5

注意 :

此指令可与 /etc/fstab 相互参考操作来加以了解。 
]]>
		</screen>
	</section>
</section>
